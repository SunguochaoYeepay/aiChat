(()=>{"use strict";var e={6191:(e,t,a)=>{var l=a(5533),r=a(6254);const n={id:"app"};function o(e,t,a,l,o,s){const u=(0,r.g2)("router-link"),d=(0,r.g2)("a-menu-item"),i=(0,r.g2)("a-menu"),c=(0,r.g2)("a-layout-header"),p=(0,r.g2)("router-view"),g=(0,r.g2)("a-layout-content"),k=(0,r.g2)("a-layout-footer"),m=(0,r.g2)("a-layout"),h=(0,r.g2)("a-config-provider");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(h,{locale:l.zhCN},{default:(0,r.k6)((()=>[(0,r.bF)(m,{style:{"min-height":"100vh"}},{default:(0,r.k6)((()=>[(0,r.bF)(c,{class:"header"},{default:(0,r.k6)((()=>[t[5]||(t[5]=(0,r.Lk)("div",{class:"logo"},"设计助手管理系统",-1)),(0,r.bF)(i,{selectedKeys:l.selectedKeys,"onUpdate:selectedKeys":t[0]||(t[0]=e=>l.selectedKeys=e),theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}},{default:(0,r.k6)((()=>[(0,r.bF)(d,{key:"dashboard"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{to:"/"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)("仪表盘")]))),_:1})])),_:1}),(0,r.bF)(d,{key:"prompt"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{to:"/prompts"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)("提示词管理")]))),_:1})])),_:1}),(0,r.bF)(d,{key:"knowledge"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{to:"/knowledge"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("知识库管理")]))),_:1})])),_:1}),(0,r.bF)(d,{key:"api"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{to:"/api"},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("API 测试")]))),_:1})])),_:1})])),_:1},8,["selectedKeys"])])),_:1}),(0,r.bF)(g,{style:{padding:"0 50px"}},{default:(0,r.k6)((()=>[(0,r.bF)(p)])),_:1}),(0,r.bF)(k,{style:{"text-align":"center"}},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)(" 设计助手管理系统 ©2023 Created with Vue and Ant Design ")]))),_:1})])),_:1})])),_:1},8,["locale"])])}var s=a(5598),u=a(9083),d=a(1117);const i={name:"App",setup(){const e=(0,u.lq)(),t=(0,s.KR)(["dashboard"]),a=()=>{const a=e.path;"/"===a?t.value=["dashboard"]:a.startsWith("/prompts")?t.value=["prompt"]:a.startsWith("/knowledge")?t.value=["knowledge"]:a.startsWith("/api")&&(t.value=["api"])};return a(),{selectedKeys:t,zhCN:d.A}}};var c=a(4093);const p=(0,c.A)(i,[["render",o]]),g=p;var k=a(8627);const m={class:"dashboard"},h={class:"dashboard-content"};function v(e,t,a,l,n,o){const s=(0,r.g2)("a-page-header"),u=(0,r.g2)("a-card"),d=(0,r.g2)("a-col"),i=(0,r.g2)("a-badge"),c=(0,r.g2)("a-row"),p=(0,r.g2)("a-divider"),g=(0,r.g2)("a-list-item-meta"),v=(0,r.g2)("a-list-item"),b=(0,r.g2)("a-list");return(0,r.uX)(),(0,r.CE)("div",m,[(0,r.bF)(s,{title:"仪表盘","sub-title":"系统概览"}),(0,r.Lk)("div",h,[(0,r.bF)(c,{gutter:16},{default:(0,r.k6)((()=>[(0,r.bF)(d,{span:6},{default:(0,r.k6)((()=>[(0,r.bF)(u,{title:"提示词模板",bordered:!1},{extra:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("a",{href:"/prompts"},"管理",-1)]))),default:(0,r.k6)((()=>[(0,r.Lk)("p",null,(0,k.v_)(l.templateCount)+" 个模板",1),(0,r.Lk)("p",null,(0,k.v_)(l.categoryCount)+" 个分类",1)])),_:1})])),_:1}),(0,r.bF)(d,{span:6},{default:(0,r.k6)((()=>[(0,r.bF)(u,{title:"知识库",bordered:!1},{extra:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.Lk)("a",{href:"/knowledge"},"管理",-1)]))),default:(0,r.k6)((()=>[(0,r.Lk)("p",null,(0,k.v_)(l.knowledgeBaseCount)+" 个知识库",1),(0,r.Lk)("p",null,(0,k.v_)(l.documentCount)+" 个文档",1)])),_:1})])),_:1}),(0,r.bF)(d,{span:6},{default:(0,r.k6)((()=>[(0,r.bF)(u,{title:"API 调用",bordered:!1},{extra:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.Lk)("a",{href:"/api"},"查看",-1)]))),default:(0,r.k6)((()=>[(0,r.Lk)("p",null,"今日: "+(0,k.v_)(l.apiCallsToday),1),(0,r.Lk)("p",null,"总计: "+(0,k.v_)(l.apiCallsTotal),1)])),_:1})])),_:1}),(0,r.bF)(d,{span:6},{default:(0,r.k6)((()=>[(0,r.bF)(u,{title:"系统状态",bordered:!1},{default:(0,r.k6)((()=>[(0,r.Lk)("p",null,[t[3]||(t[3]=(0,r.eW)("模型状态: ")),(0,r.bF)(i,{status:"success",text:"在线"})]),(0,r.Lk)("p",null,[t[4]||(t[4]=(0,r.eW)("API 服务: ")),(0,r.bF)(i,{status:"success",text:"在线"})])])),_:1})])),_:1})])),_:1}),(0,r.bF)(p),(0,r.bF)(c,{gutter:16},{default:(0,r.k6)((()=>[(0,r.bF)(d,{span:12},{default:(0,r.k6)((()=>[(0,r.bF)(u,{title:"最近活动",bordered:!1},{default:(0,r.k6)((()=>[(0,r.bF)(b,{size:"small",bordered:!1,"data-source":l.recentActivities},{renderItem:(0,r.k6)((({item:e})=>[(0,r.bF)(v,null,{actions:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.Lk)("a",null,"查看",-1)]))),default:(0,r.k6)((()=>[(0,r.bF)(g,{title:e.title},{description:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(e.time),1)])),_:2},1032,["title"])])),_:2},1024)])),_:1},8,["data-source"])])),_:1})])),_:1}),(0,r.bF)(d,{span:12},{default:(0,r.k6)((()=>[(0,r.bF)(u,{title:"提示词使用情况",bordered:!1},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("div",{style:{height:"200px",display:"flex","align-items":"center","justify-content":"center"}},[(0,r.Lk)("p",null,"此处显示提示词使用统计图表")],-1)]))),_:1})])),_:1})])),_:1})])])}const b={name:"Dashboard",setup(){const e=(0,s.KR)(0),t=(0,s.KR)(0),a=(0,s.KR)(0),l=(0,s.KR)(0),n=(0,s.KR)(0),o=(0,s.KR)(0),u=(0,s.KR)([{title:"更新了聊天提示词模板",time:"2023-12-15 14:30"},{title:"添加了新的知识库文档",time:"2023-12-15 11:20"},{title:"重置了默认提示词",time:"2023-12-14 16:45"},{title:"优化了搜索相关提示词",time:"2023-12-14 10:15"},{title:"更新了系统配置",time:"2023-12-13 09:30"}]),d=async()=>{e.value=16,t.value=4,a.value=3,l.value=27,n.value=128,o.value=5763};return(0,r.sV)((()=>{d()})),{templateCount:e,categoryCount:t,knowledgeBaseCount:a,documentCount:l,apiCallsToday:n,apiCallsTotal:o,recentActivities:u}}},y=(0,c.A)(b,[["render",v],["__scopeId","data-v-192f8993"]]),f=y,_={class:"prompt-manager"};function C(e,t,a,l,n,o){const s=(0,r.g2)("a-button"),u=(0,r.g2)("a-page-header"),d=(0,r.g2)("prompt-template-editor"),i=(0,r.g2)("a-tab-pane"),c=(0,r.g2)("a-popconfirm"),p=(0,r.g2)("a-space"),g=(0,r.g2)("a-table"),k=(0,r.g2)("a-tabs"),m=(0,r.g2)("a-card"),h=(0,r.g2)("a-input"),v=(0,r.g2)("a-form-item"),b=(0,r.g2)("a-textarea"),y=(0,r.g2)("a-form"),f=(0,r.g2)("a-modal");return(0,r.uX)(),(0,r.CE)("div",_,[(0,r.bF)(u,{title:"提示词模板管理","sub-title":"管理系统中使用的提示词模板"},{extra:(0,r.k6)((()=>[(0,r.bF)(s,{type:"primary",onClick:l.refreshData},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("刷新")]))),_:1},8,["onClick"])])),_:1}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[(0,r.bF)(k,{activeKey:l.activeTab,"onUpdate:activeKey":t[0]||(t[0]=e=>l.activeTab=e)},{default:(0,r.k6)((()=>[(0,r.bF)(i,{key:"editor",tab:"模板编辑器"},{default:(0,r.k6)((()=>[(0,r.bF)(d)])),_:1}),(0,r.bF)(i,{key:"list",tab:"模板列表"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{columns:l.columns,"data-source":l.tableData,loading:l.loading,"row-key":"id"},{bodyCell:(0,r.k6)((({column:e,record:a})=>["actions"===e.key?((0,r.uX)(),(0,r.Wv)(p,{key:0},{default:(0,r.k6)((()=>[(0,r.bF)(s,{type:"link",onClick:e=>l.editTemplate(a)},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("编辑")]))),_:2},1032,["onClick"]),(0,r.bF)(c,{title:"确定要删除此模板吗?",onConfirm:e=>l.deleteTemplate(a.id),"ok-text":"确定","cancel-text":"取消"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{type:"link",danger:""},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)("删除")]))),_:1})])),_:2},1032,["onConfirm"])])),_:2},1024)):(0,r.Q3)("",!0)])),_:1},8,["columns","data-source","loading"])])),_:1}),(0,r.bF)(i,{key:"help",tab:"帮助"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.Lk)("div",{class:"help-content"},[(0,r.Lk)("h2",null,"提示词模板使用指南"),(0,r.Lk)("p",null,"提示词模板是定义 AI 模型行为的关键组件。通过调整提示词，可以控制 AI 的回复风格、格式和内容。"),(0,r.Lk)("h3",null,"可用变量"),(0,r.Lk)("p",null,"在提示词模板中，您可以使用以下变量："),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.Lk)("strong",null,"{query}"),(0,r.eW)(" - 用户的当前问题")]),(0,r.Lk)("li",null,[(0,r.Lk)("strong",null,"{history}"),(0,r.eW)(" - 聊天历史记录")]),(0,r.Lk)("li",null,[(0,r.Lk)("strong",null,"{content}"),(0,r.eW)(" - 知识库搜索结果")]),(0,r.Lk)("li",null,[(0,r.Lk)("strong",null,"{topics}"),(0,r.eW)(" - 主题列表（用于主题匹配）")])]),(0,r.Lk)("h3",null,"模板类别"),(0,r.Lk)("p",null,"系统提供以下几种模板类别："),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.Lk)("strong",null,"chat"),(0,r.eW)(" - 用于常规聊天对话")]),(0,r.Lk)("li",null,[(0,r.Lk)("strong",null,"search"),(0,r.eW)(" - 用于结合知识库搜索的回答")]),(0,r.Lk)("li",null,[(0,r.Lk)("strong",null,"image_analysis"),(0,r.eW)(" - 用于图像分析场景")]),(0,r.Lk)("li",null,[(0,r.Lk)("strong",null,"topic_matching"),(0,r.eW)(" - 用于主题匹配")])]),(0,r.Lk)("h3",null,"最佳实践"),(0,r.Lk)("p",null,"1. 保持提示词清晰简洁"),(0,r.Lk)("p",null,"2. 使用明确的指令和界限"),(0,r.Lk)("p",null,"3. 定期检查和优化模板效果")],-1)]))),_:1})])),_:1},8,["activeKey"])])),_:1}),(0,r.bF)(f,{visible:l.editModalVisible,"onUpdate:visible":t[4]||(t[4]=e=>l.editModalVisible=e),title:"编辑提示词模板",onOk:l.saveEditedTemplate,width:"700px"},{default:(0,r.k6)((()=>[(0,r.bF)(y,{layout:"vertical"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{label:"名称"},{default:(0,r.k6)((()=>[(0,r.bF)(h,{value:l.editingTemplate.name,"onUpdate:value":t[1]||(t[1]=e=>l.editingTemplate.name=e),disabled:""},null,8,["value"])])),_:1}),(0,r.bF)(v,{label:"描述"},{default:(0,r.k6)((()=>[(0,r.bF)(h,{value:l.editingTemplate.description,"onUpdate:value":t[2]||(t[2]=e=>l.editingTemplate.description=e)},null,8,["value"])])),_:1}),(0,r.bF)(v,{label:"内容"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{value:l.editingTemplate.content,"onUpdate:value":t[3]||(t[3]=e=>l.editingTemplate.content=e),rows:12,placeholder:"请输入提示词模板内容..."},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["visible","onOk"])])}var w=a(3163);const F={class:"prompt-editor"},T={class:"actions-container"},E={class:"template-info"},L={class:"batch-actions"};function A(e,t,a,l,n,o){const s=(0,r.g2)("a-select-option"),u=(0,r.g2)("a-select"),d=(0,r.g2)("a-form-item"),i=(0,r.g2)("a-col"),c=(0,r.g2)("a-button"),p=(0,r.g2)("a-row"),g=(0,r.g2)("a-textarea"),m=(0,r.g2)("a-tag"),h=(0,r.g2)("a-divider"),v=(0,r.g2)("a-form");return(0,r.uX)(),(0,r.CE)("div",F,[(0,r.bF)(v,{layout:"vertical"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{gutter:16},{default:(0,r.k6)((()=>[(0,r.bF)(i,{span:6},{default:(0,r.k6)((()=>[(0,r.bF)(d,{label:"类别"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{value:l.currentCategory,"onUpdate:value":t[0]||(t[0]=e=>l.currentCategory=e),onChange:l.handleCategoryChange,style:{width:"100%"},placeholder:"选择类别",disabled:!l.editMode},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.categories,(e=>((0,r.uX)(),(0,r.Wv)(s,{key:e,value:e},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","onChange","disabled"])])),_:1})])),_:1}),(0,r.bF)(i,{span:12},{default:(0,r.k6)((()=>[(0,r.bF)(d,{label:"类型"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{value:l.currentType,"onUpdate:value":t[1]||(t[1]=e=>l.currentType=e),onChange:l.handleTypeChange,style:{width:"100%"},placeholder:"选择类型",disabled:!l.currentCategory||!l.editMode},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.types[l.currentCategory]||{},((e,t)=>((0,r.uX)(),(0,r.Wv)(s,{key:t,value:t},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(t),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","onChange","disabled"])])),_:1})])),_:1}),(0,r.bF)(i,{span:6},{default:(0,r.k6)((()=>[(0,r.bF)(d,{label:"操作"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",T,[l.editMode?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.bF)(c,{type:"primary",onClick:l.saveChanges},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("保存")]))),_:1},8,["onClick"]),(0,r.bF)(c,{onClick:l.cancelEdit},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("取消")]))),_:1},8,["onClick"])],64)):((0,r.uX)(),(0,r.Wv)(c,{key:0,type:"primary",onClick:l.enableEdit},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)(" 编辑 ")]))),_:1},8,["onClick"]))])])),_:1})])),_:1})])),_:1}),(0,r.bF)(d,{label:"提示词内容"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{value:l.currentContent,"onUpdate:value":t[2]||(t[2]=e=>l.currentContent=e),placeholder:"请输入提示词模板内容...",rows:10,disabled:!l.editMode||!l.currentCategory||!l.currentType},null,8,["value","disabled"])])),_:1}),(0,r.Lk)("div",E,[t[13]||(t[13]=(0,r.Lk)("h3",null,"可用变量:",-1)),"chat"===l.currentCategory?((0,r.uX)(),(0,r.Wv)(m,{key:0,color:"blue"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("{query}")]))),_:1})):(0,r.Q3)("",!0),"chat"===l.currentCategory?((0,r.uX)(),(0,r.Wv)(m,{key:1,color:"green"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)("{history}")]))),_:1})):(0,r.Q3)("",!0),"search"===l.currentCategory?((0,r.uX)(),(0,r.Wv)(m,{key:2,color:"blue"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)("{query}")]))),_:1})):(0,r.Q3)("",!0),"search"===l.currentCategory?((0,r.uX)(),(0,r.Wv)(m,{key:3,color:"purple"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)("{content}")]))),_:1})):(0,r.Q3)("",!0),"image_analysis"===l.currentCategory?((0,r.uX)(),(0,r.Wv)(m,{key:4,color:"blue"},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.eW)("{query}")]))),_:1})):(0,r.Q3)("",!0),"topic_matching"===l.currentCategory?((0,r.uX)(),(0,r.Wv)(m,{key:5,color:"blue"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("{query}")]))),_:1})):(0,r.Q3)("",!0),"topic_matching"===l.currentCategory?((0,r.uX)(),(0,r.Wv)(m,{key:6,color:"orange"},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("{topics}")]))),_:1})):(0,r.Q3)("",!0)]),(0,r.bF)(h,{orientation:"left"},{default:(0,r.k6)((()=>t[14]||(t[14]=[(0,r.eW)("批量操作")]))),_:1}),(0,r.Lk)("div",L,[(0,r.bF)(c,{type:"primary",onClick:l.saveAllChanges},{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)("保存所有更改")]))),_:1},8,["onClick"]),(0,r.bF)(c,{danger:"",onClick:l.resetToDefaults},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("重置为默认值")]))),_:1},8,["onClick"]),(0,r.bF)(c,{onClick:l.refreshCache},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("刷新缓存")]))),_:1},8,["onClick"])])])),_:1})])}var W=a(6357);const K=W.A.create({baseURL:"http://localhost:8000/api/v1",headers:{"Content-Type":"application/json"},withCredentials:!0}),S={getTemplates(){return K.get("/templates/")},getTemplateCategories(){return K.get("/templates/categories/")},getTemplate(e){return K.get(`/templates/${e}/`)},createTemplate(e){return K.post("/templates/",e)},updateTemplate(e,t){return K.put(`/templates/${e}/`,t)},deleteTemplate(e){return K.delete(`/templates/${e}/`)},refreshCache(){return K.post("/templates/refresh_cache/")},resetTemplates(){return K.post("/templates/reset/")},batchUpdateTemplates(e){return K.post("/templates/batch_update/",e)}},O={name:"PromptTemplateEditor",setup(){const e=(0,s.KR)([]),t=(0,s.Kh)({}),a=(0,s.Kh)({}),l=(0,s.Kh)({}),n=(0,s.KR)(""),o=(0,s.KR)(""),u=(0,s.KR)(""),d=(0,s.KR)(!1),i=async()=>{try{const r=await S.getTemplateCategories(),s=r.data;if(e.value=[],Object.keys(t).forEach((e=>delete t[e])),Object.keys(a).forEach((e=>delete a[e])),Object.keys(l).forEach((e=>delete l[e])),s.forEach((r=>{const n=r.category;e.value.push(n),t[n]={},a[n]={},l[n]={},Object.entries(r.types).forEach((([e,r])=>{t[n][e]=e,a[n][e]=r,l[n][e]=r}))})),e.value.length>0){n.value=e.value[0];const l=Object.keys(t[n.value]||{});l.length>0&&(o.value=l[0],u.value=a[n.value][o.value])}}catch(r){w.Ay.error("加载提示词模板失败: "+r.message)}},c=e=>{n.value=e;const l=Object.keys(t[e]||{});l.length>0?(o.value=l[0],u.value=a[n.value][o.value]):(o.value="",u.value="")},p=e=>{o.value=e,u.value=a[n.value][o.value]},g=()=>{d.value=!0},k=()=>{n.value&&o.value&&(u.value=l[n.value][o.value],a[n.value][o.value]=l[n.value][o.value]),d.value=!1},m=()=>{n.value&&o.value&&(a[n.value][o.value]=u.value,w.Ay.success('模板已更新，请点击"保存所有更改"以保存到服务器'),d.value=!1)},h=async()=>{try{await S.batchUpdateTemplates(a),await i(),w.Ay.success("所有模板已保存")}catch(e){w.Ay.error("保存模板失败: "+e.message)}},v=async()=>{try{await S.resetTemplates(),await i(),w.Ay.success("所有模板已重置为默认值")}catch(e){w.Ay.error("重置模板失败: "+e.message)}},b=async()=>{try{await S.refreshCache(),w.Ay.success("缓存已刷新")}catch(e){w.Ay.error("刷新缓存失败: "+e.message)}};return(0,r.sV)((()=>{i()})),{categories:e,types:t,currentCategory:n,currentType:o,currentContent:u,editMode:d,handleCategoryChange:c,handleTypeChange:p,enableEdit:g,cancelEdit:k,saveChanges:m,saveAllChanges:h,resetToDefaults:v,refreshCache:b}}},x=(0,c.A)(O,[["render",A],["__scopeId","data-v-035b8594"]]),R=x,P={name:"PromptManager",components:{PromptTemplateEditor:R},setup(){const e=(0,s.KR)("editor"),t=(0,s.KR)(!1),a=(0,s.KR)([]),l=(0,s.KR)(!1),n=(0,s.Kh)({id:null,name:"",description:"",content:""}),o=[{title:"ID",dataIndex:"id",key:"id",width:60},{title:"模板名称",dataIndex:"name",key:"name",sorter:(e,t)=>e.name.localeCompare(t.name),width:200},{title:"描述",dataIndex:"description",key:"description",width:300},{title:"创建时间",dataIndex:"created_at",key:"created_at",width:180},{title:"更新时间",dataIndex:"updated_at",key:"updated_at",width:180},{title:"操作",key:"actions",width:120}],u=async()=>{t.value=!0;try{const e=await S.getTemplates();a.value=e.data}catch(e){w.Ay.error("加载提示词模板失败: "+e.message)}finally{t.value=!1}},d=()=>{u()},i=e=>{Object.assign(n,e),l.value=!0},c=async()=>{try{await S.updateTemplate(n.id,{name:n.name,description:n.description,content:n.content}),w.Ay.success("模板更新成功"),l.value=!1,u(),await S.refreshCache()}catch(e){w.Ay.error("更新模板失败: "+e.message)}},p=async e=>{try{await S.deleteTemplate(e),w.Ay.success("模板删除成功"),u(),await S.refreshCache()}catch(t){w.Ay.error("删除模板失败: "+t.message)}};return(0,r.sV)((()=>{u()})),{activeTab:e,loading:t,tableData:a,columns:o,editModalVisible:l,editingTemplate:n,refreshData:d,editTemplate:i,saveEditedTemplate:c,deleteTemplate:p}}},B=(0,c.A)(P,[["render",C],["__scopeId","data-v-4cf636c3"]]),I=B,j=[{path:"/",name:"Dashboard",component:f},{path:"/prompts",name:"PromptManager",component:I},{path:"/knowledge",name:"KnowledgeBase",component:()=>a.e(451).then(a.bind(a,451))},{path:"/api",name:"ApiTest",component:()=>a.e(608).then(a.bind(a,9608))}],M=(0,u.aE)({history:(0,u.LA)("/"),routes:j}),U=M;var X=a(3594),D=a(6327);const N=(0,X.y$)({state:{user:null,isAuthenticated:!1,promptTemplates:[],promptCategories:[],knowledgeBases:[]},getters:{getUser:e=>e.user,isAuthenticated:e=>e.isAuthenticated,getPromptTemplates:e=>e.promptTemplates,getPromptCategories:e=>e.promptCategories,getKnowledgeBases:e=>e.knowledgeBases},mutations:{SET_USER(e,t){e.user=t,e.isAuthenticated=!!t},SET_PROMPT_TEMPLATES(e,t){e.promptTemplates=t},SET_PROMPT_CATEGORIES(e,t){e.promptCategories=t},SET_KNOWLEDGE_BASES(e,t){e.knowledgeBases=t}},actions:{async login({commit:e},t){const a={username:t.username};return e("SET_USER",a),localStorage.setItem("user",JSON.stringify(a)),a},logout({commit:e}){e("SET_USER",null),localStorage.removeItem("user")},initAuth({commit:e}){const t=localStorage.getItem("user");t&&e("SET_USER",JSON.parse(t))},async fetchPromptTemplates({commit:e}){try{const t=await S.getTemplates();return e("SET_PROMPT_TEMPLATES",t.data),t.data}catch(t){throw console.error("获取提示词模板失败:",t),t}},async fetchPromptCategories({commit:e}){try{const t=await S.getTemplateCategories();return e("SET_PROMPT_CATEGORIES",t.data),t.data}catch(t){throw console.error("获取提示词模板分类失败:",t),t}},async fetchKnowledgeBases({commit:e}){try{const t=await D.A.getKnowledgeBases();return e("SET_KNOWLEDGE_BASES",t.data),t.data}catch(t){throw console.error("获取知识库列表失败:",t),t}},async deleteKnowledgeBase({dispatch:e},t){try{return await D.A.deleteKnowledgeBase(t),e("fetchKnowledgeBases"),{status:"success",message:"知识库删除成功"}}catch(a){throw console.error("删除知识库失败:",a),a}}},modules:{}});var q=a(5316);a(7570);const Q=(0,l.Ef)(g);Q.use(N),Q.use(U),Q.use(q.Ay),Q.mount("#app")},6327:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(6357);const r=l.A.create({baseURL:"http://localhost:8000/api/v1",headers:{"Content-Type":"application/json"},withCredentials:!0}),n={getKnowledgeBases(){return r.get("/knowledge/")},getKnowledgeBase(e){return r.get(`/knowledge/${e}/`)},createKnowledgeBase(e){return r.post("/knowledge/",e)},updateKnowledgeBase(e,t){return r.put(`/knowledge/${e}/`,t)},deleteKnowledgeBase(e){return r.delete(`/knowledge/${e}/`)},importFromDirectory(e){return r.post("/knowledge/import_directory/",{directory:e})},uploadFile(e){const t=new FormData;return t.append("file",e),r.post("/knowledge/upload/",t,{headers:{"Content-Type":"multipart/form-data"}})},indexKnowledgeBase(e){return r.post(`/knowledge/${e}/index/`)}}}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,(()=>{var e=[];a.O=(t,l,r,n)=>{if(!l){var o=1/0;for(i=0;i<e.length;i++){for(var[l,r,n]=e[i],s=!0,u=0;u<l.length;u++)(!1&n||o>=n)&&Object.keys(a.O).every((e=>a.O[e](l[u])))?l.splice(u--,1):(s=!1,n<o&&(o=n));if(s){e.splice(i--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[l,r,n]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}})(),(()=>{a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,l)=>(a.f[l](e,t),t)),[]))})(),(()=>{a.u=e=>"assets/js/"+e+"."+{451:"89c3e49b",608:"ff916493"}[e]+".js"})(),(()=>{a.miniCssF=e=>"assets/css/"+e+"."+{451:"a33c5a5b",608:"2919a10b"}[e]+".css"})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="design-helper-frontend:";a.l=(l,r,n,o)=>{if(e[l])e[l].push(r);else{var s,u;if(void 0!==n)for(var d=document.getElementsByTagName("script"),i=0;i<d.length;i++){var c=d[i];if(c.getAttribute("src")==l||c.getAttribute("data-webpack")==t+n){s=c;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+n),s.src=l),e[l]=[r];var p=(t,a)=>{s.onerror=s.onload=null,clearTimeout(g);var r=e[l];if(delete e[l],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(a))),t)return t(a)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),u&&document.head.appendChild(s)}}})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,l,r,n)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",a.nc&&(o.nonce=a.nc);var s=a=>{if(o.onerror=o.onload=null,"load"===a.type)r();else{var l=a&&a.type,s=a&&a.target&&a.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+l+": "+s+")");u.name="ChunkLoadError",u.code="CSS_CHUNK_LOAD_FAILED",u.type=l,u.request=s,o.parentNode&&o.parentNode.removeChild(o),n(u)}};return o.onerror=o.onload=s,o.href=t,l?l.parentNode.insertBefore(o,l.nextSibling):document.head.appendChild(o),o},t=(e,t)=>{for(var a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var r=a[l],n=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var o=document.getElementsByTagName("style");for(l=0;l<o.length;l++){r=o[l],n=r.getAttribute("data-href");if(n===e||n===t)return r}},l=l=>new Promise(((r,n)=>{var o=a.miniCssF(l),s=a.p+o;if(t(o,s))return r();e(l,s,null,r,n)})),r={524:0};a.f.miniCss=(e,t)=>{var a={451:1,608:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=l(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))}}})(),(()=>{var e={524:0};a.f.j=(t,l)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)l.push(r[2]);else{var n=new Promise(((a,l)=>r=e[t]=[a,l]));l.push(r[2]=n);var o=a.p+a.u(t),s=new Error,u=l=>{if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var n=l&&("load"===l.type?"missing":l.type),o=l&&l.target&&l.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",s.name="ChunkLoadError",s.type=n,s.request=o,r[1](s)}};a.l(o,u,"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,l)=>{var r,n,[o,s,u]=l,d=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(u)var i=u(a)}for(t&&t(l);d<o.length;d++)n=o[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(i)},l=self["webpackChunkdesign_helper_frontend"]=self["webpackChunkdesign_helper_frontend"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var l=a.O(void 0,[504],(()=>a(6191)));l=a.O(l)})();
//# sourceMappingURL=app.8fcd32f9.js.map