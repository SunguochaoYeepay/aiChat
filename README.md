# AI图像分析辅助设计工具

这是一个基于通义千问VL多模态大模型的图像分析与设计辅助工具，支持图像内容理解、目标检测与边界框显示等功能。

## 主要功能

1. **图像内容分析**：上传图片，AI自动识别图像内容并进行详细描述
2. **目标检测**：支持检测图像中的特定对象并返回边界框坐标
3. **多目标识别**：同时识别图像中的多个对象并标记
4. **边界框可视化**：将检测到的对象用边界框标记并生成可视化图像
5. **支持中文交互**：完全支持中文自然语言交互和分析结果

## 技术栈

- **后端**：FastAPI + Python
- **AI模型**：通义千问Qwen-VL多模态大模型
- **图像处理**：PIL库
- **部署环境**：支持GPU加速

## 使用方法

### 服务端启动

```bash
python gpu_model_server.py
```

服务将在 http://localhost:8000 上启动

### API接口

1. **图像分析 API**：`POST /analyze`
   - 请求体：`{"image_base64": "<base64编码的图像>", "query": "这张图片是什么?"}`
   - 返回：`{"result": "分析结果", "processing_time": "处理时间", "boxed_image_url": "边界框图像URL"}`

2. **服务状态 API**：`GET /status`
   - 返回服务状态信息和GPU使用情况

### 测试脚本

```bash
python test_image_analysis.py
```

此脚本会测试图像分析、目标检测和多目标检测功能

## 目录结构

- `gpu_model_server.py`：主服务器程序
- `test_image_analysis.py`：测试脚本
- `static/box_images/`：存储边界框图像的目录
- `knowledge_base/`：知识库目录（用于扩展功能）

## 注意事项

1. 需要预先下载通义千问Qwen-VL模型到本地
2. 适合在有GPU加速的环境下运行
3. 支持多种图像格式(jpg, png等)
4. 目标检测准确性取决于模型能力和图像质量

## 许可证

MIT 