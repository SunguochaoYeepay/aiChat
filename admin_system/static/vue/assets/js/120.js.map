{"version":3,"file":"assets/js/120.js","mappings":"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","sources":["webpack://design-helper-frontend/./src/views/UserManager.vue","webpack://design-helper-frontend/./src/views/UserManager.vue?28a2","webpack://design-helper-frontend/./node_modules/@ant-design/icons-svg/es/asn/PlusOutlined.js","webpack://design-helper-frontend/./node_modules/@ant-design/icons-vue/es/icons/PlusOutlined.js"],"sourcesContent":["<template>\r\n  <div class=\"user-manager-container\">\r\n    <a-card title=\"用户管理\" :bordered=\"false\">\r\n      <template #extra>\r\n        <a-button type=\"primary\" @click=\"showCreateModal\">\r\n          <template #icon><plus-outlined /></template>\r\n          创建用户\r\n        </a-button>\r\n      </template>\r\n\r\n      <a-table\r\n        :columns=\"columns\"\r\n        :data-source=\"users\"\r\n        :loading=\"loading\"\r\n        :pagination=\"{ pageSize: 10 }\"\r\n        rowKey=\"id\"\r\n      >\r\n        <template #bodyCell=\"{ column, record }\">\r\n          <template v-if=\"column.dataIndex === 'is_active'\">\r\n            <a-tag :color=\"record.is_active ? 'green' : 'red'\">\r\n              {{ record.is_active ? '激活' : '禁用' }}\r\n            </a-tag>\r\n          </template>\r\n          <template v-else-if=\"column.dataIndex === 'is_staff'\">\r\n            <a-tag :color=\"record.is_staff ? 'blue' : 'default'\">\r\n              {{ record.is_staff ? '管理员' : '普通用户' }}\r\n            </a-tag>\r\n          </template>\r\n          <template v-else-if=\"column.dataIndex === 'action'\">\r\n            <a-space>\r\n              <a-button type=\"link\" @click=\"showEditModal(record)\">编辑</a-button>\r\n              <a-popconfirm\r\n                title=\"确定要删除这个用户吗？\"\r\n                ok-text=\"确定\"\r\n                cancel-text=\"取消\"\r\n                @confirm=\"deleteUser(record)\"\r\n              >\r\n                <a-button type=\"link\" danger>删除</a-button>\r\n              </a-popconfirm>\r\n            </a-space>\r\n          </template>\r\n        </template>\r\n      </a-table>\r\n\r\n      <!-- 创建用户弹窗 -->\r\n      <a-modal\r\n        v-model:visible=\"createModalVisible\"\r\n        title=\"创建用户\"\r\n        @ok=\"handleCreateUser\"\r\n        :confirmLoading=\"modalLoading\"\r\n      >\r\n        <a-form\r\n          :model=\"userForm\"\r\n          :rules=\"rules\"\r\n          ref=\"createFormRef\"\r\n          layout=\"vertical\"\r\n        >\r\n          <a-form-item label=\"用户名\" name=\"username\">\r\n            <a-input v-model:value=\"userForm.username\" placeholder=\"请输入用户名\" />\r\n          </a-form-item>\r\n          <a-form-item label=\"邮箱\" name=\"email\">\r\n            <a-input v-model:value=\"userForm.email\" placeholder=\"请输入邮箱\" />\r\n          </a-form-item>\r\n          <a-form-item label=\"密码\" name=\"password\">\r\n            <a-input-password v-model:value=\"userForm.password\" placeholder=\"请输入密码\" />\r\n          </a-form-item>\r\n          <a-form-item name=\"is_staff\">\r\n            <a-checkbox v-model:checked=\"userForm.is_staff\">设为管理员</a-checkbox>\r\n          </a-form-item>\r\n        </a-form>\r\n      </a-modal>\r\n\r\n      <!-- 编辑用户弹窗 -->\r\n      <a-modal\r\n        v-model:visible=\"editModalVisible\"\r\n        title=\"编辑用户\"\r\n        @ok=\"handleUpdateUser\"\r\n        :confirmLoading=\"modalLoading\"\r\n      >\r\n        <a-form\r\n          :model=\"userForm\"\r\n          :rules=\"editRules\"\r\n          ref=\"editFormRef\"\r\n          layout=\"vertical\"\r\n        >\r\n          <a-form-item label=\"用户名\" name=\"username\">\r\n            <a-input v-model:value=\"userForm.username\" placeholder=\"请输入用户名\" />\r\n          </a-form-item>\r\n          <a-form-item label=\"邮箱\" name=\"email\">\r\n            <a-input v-model:value=\"userForm.email\" placeholder=\"请输入邮箱\" />\r\n          </a-form-item>\r\n          <a-form-item label=\"密码\" name=\"password\" extra=\"如不修改密码请留空\">\r\n            <a-input-password v-model:value=\"userForm.password\" placeholder=\"请输入新密码\" />\r\n          </a-form-item>\r\n          <a-form-item name=\"is_active\">\r\n            <a-checkbox v-model:checked=\"userForm.is_active\">启用账户</a-checkbox>\r\n          </a-form-item>\r\n          <a-form-item name=\"is_staff\">\r\n            <a-checkbox v-model:checked=\"userForm.is_staff\">设为管理员</a-checkbox>\r\n          </a-form-item>\r\n        </a-form>\r\n      </a-modal>\r\n    </a-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref, reactive, onMounted } from 'vue';\r\nimport { message } from 'ant-design-vue';\r\nimport { PlusOutlined } from '@ant-design/icons-vue';\r\nimport { getUserList, createUser, updateUser, deleteUser as apiDeleteUser } from '../api/auth';\r\n\r\nexport default defineComponent({\r\n  name: 'UserManager',\r\n  components: {\r\n    PlusOutlined\r\n  },\r\n  setup() {\r\n    const users = ref([]);\r\n    const loading = ref(false);\r\n    const createModalVisible = ref(false);\r\n    const editModalVisible = ref(false);\r\n    const modalLoading = ref(false);\r\n    const currentUserId = ref(null);\r\n    const createFormRef = ref(null);\r\n    const editFormRef = ref(null);\r\n    \r\n    const columns = [\r\n      { title: 'ID', dataIndex: 'id', key: 'id' },\r\n      { title: '用户名', dataIndex: 'username', key: 'username' },\r\n      { title: '邮箱', dataIndex: 'email', key: 'email' },\r\n      { title: '状态', dataIndex: 'is_active', key: 'is_active' },\r\n      { title: '角色', dataIndex: 'is_staff', key: 'is_staff' },\r\n      { title: '创建时间', dataIndex: 'date_joined', key: 'date_joined' },\r\n      { title: '最后登录', dataIndex: 'last_login', key: 'last_login' },\r\n      { title: '操作', dataIndex: 'action', key: 'action' }\r\n    ];\r\n    \r\n    const userForm = reactive({\r\n      username: '',\r\n      email: '',\r\n      password: '',\r\n      is_active: true,\r\n      is_staff: false\r\n    });\r\n    \r\n    const rules = {\r\n      username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\r\n      password: [{ required: true, message: '请输入密码', trigger: 'blur' }]\r\n    };\r\n    \r\n    const editRules = {\r\n      username: [{ required: true, message: '请输入用户名', trigger: 'blur' }]\r\n    };\r\n    \r\n    // 获取用户列表\r\n    const fetchUsers = async () => {\r\n      loading.value = true;\r\n      try {\r\n        const response = await getUserList();\r\n        users.value = response.data.users;\r\n      } catch (error) {\r\n        console.error('获取用户列表失败:', error);\r\n        message.error('获取用户列表失败');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 显示创建用户弹窗\r\n    const showCreateModal = () => {\r\n      resetUserForm();\r\n      createModalVisible.value = true;\r\n    };\r\n    \r\n    // 显示编辑用户弹窗\r\n    const showEditModal = (user) => {\r\n      resetUserForm();\r\n      currentUserId.value = user.id;\r\n      userForm.username = user.username;\r\n      userForm.email = user.email;\r\n      userForm.password = ''; // 密码不回显\r\n      userForm.is_active = user.is_active;\r\n      userForm.is_staff = user.is_staff;\r\n      editModalVisible.value = true;\r\n    };\r\n    \r\n    // 重置表单\r\n    const resetUserForm = () => {\r\n      userForm.username = '';\r\n      userForm.email = '';\r\n      userForm.password = '';\r\n      userForm.is_active = true;\r\n      userForm.is_staff = false;\r\n      currentUserId.value = null;\r\n    };\r\n    \r\n    // 创建用户\r\n    const handleCreateUser = async () => {\r\n      try {\r\n        await createFormRef.value.validate();\r\n        modalLoading.value = true;\r\n        \r\n        await createUser({\r\n          username: userForm.username,\r\n          email: userForm.email,\r\n          password: userForm.password,\r\n          is_staff: userForm.is_staff\r\n        });\r\n        \r\n        message.success('创建用户成功');\r\n        createModalVisible.value = false;\r\n        fetchUsers(); // 刷新用户列表\r\n      } catch (error) {\r\n        if (error.response && error.response.data) {\r\n          message.error(error.response.data.error || '创建用户失败');\r\n        } else if (error.message) {\r\n          // 表单验证错误\r\n          console.error('表单验证失败', error);\r\n        } else {\r\n          message.error('创建用户失败');\r\n        }\r\n      } finally {\r\n        modalLoading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 更新用户\r\n    const handleUpdateUser = async () => {\r\n      try {\r\n        await editFormRef.value.validate();\r\n        modalLoading.value = true;\r\n        \r\n        const updateData = {\r\n          username: userForm.username,\r\n          email: userForm.email,\r\n          is_active: userForm.is_active,\r\n          is_staff: userForm.is_staff\r\n        };\r\n        \r\n        // 如果输入了密码，则更新密码\r\n        if (userForm.password) {\r\n          updateData.password = userForm.password;\r\n        }\r\n        \r\n        await updateUser(currentUserId.value, updateData);\r\n        \r\n        message.success('更新用户成功');\r\n        editModalVisible.value = false;\r\n        fetchUsers(); // 刷新用户列表\r\n      } catch (error) {\r\n        if (error.response && error.response.data) {\r\n          message.error(error.response.data.error || '更新用户失败');\r\n        } else if (error.message) {\r\n          // 表单验证错误\r\n          console.error('表单验证失败', error);\r\n        } else {\r\n          message.error('更新用户失败');\r\n        }\r\n      } finally {\r\n        modalLoading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 删除用户\r\n    const deleteUser = async (user) => {\r\n      loading.value = true;\r\n      try {\r\n        await apiDeleteUser(user.id);\r\n        message.success(`用户 ${user.username} 已删除`);\r\n        fetchUsers(); // 刷新用户列表\r\n      } catch (error) {\r\n        if (error.response && error.response.data) {\r\n          message.error(error.response.data.error || '删除用户失败');\r\n        } else {\r\n          message.error('删除用户失败');\r\n        }\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n    \r\n    onMounted(() => {\r\n      fetchUsers();\r\n    });\r\n    \r\n    return {\r\n      users,\r\n      loading,\r\n      columns,\r\n      userForm,\r\n      rules,\r\n      editRules,\r\n      createModalVisible,\r\n      editModalVisible,\r\n      modalLoading,\r\n      createFormRef,\r\n      editFormRef,\r\n      showCreateModal,\r\n      showEditModal,\r\n      handleCreateUser,\r\n      handleUpdateUser,\r\n      deleteUser\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.user-manager-container {\r\n  padding: 24px;\r\n}\r\n</style> ","import { render } from \"./UserManager.vue?vue&type=template&id=63cf5e56&scoped=true\"\nimport script from \"./UserManager.vue?vue&type=script&lang=js\"\nexport * from \"./UserManager.vue?vue&type=script&lang=js\"\n\nimport \"./UserManager.vue?vue&type=style&index=0&id=63cf5e56&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+comp_f9631e568d1fa9c9629941e78f438030/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-63cf5e56\"]])\n\nexport default __exports__","// This icon file is generated automatically.\nvar PlusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z\" } }] }, \"name\": \"plus\", \"theme\": \"outlined\" };\nexport default PlusOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport PlusOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusOutlined = function PlusOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": PlusOutlinedSvg\n  }), null);\n};\n\nPlusOutlined.displayName = 'PlusOutlined';\nPlusOutlined.inheritAttrs = false;\nexport default PlusOutlined;"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_a_card","title","bordered","extra","_withCtx","_component_a_button","type","onClick","_ctx","showCreateModal","icon","_component_plus_outlined","default","_createTextVNode","_","_component_a_table","columns","users","loading","pagination","pageSize","rowKey","bodyCell","column","record","dataIndex","_createBlock","_component_a_tag","key","color","is_active","_toDisplayString","is_staff","_component_a_space","$event","showEditModal","_cache","_component_a_popconfirm","onConfirm","deleteUser","danger","_createCommentVNode","_component_a_modal","visible","createModalVisible","onOk","handleCreateUser","confirmLoading","modalLoading","_component_a_form","model","userForm","rules","ref","layout","_component_a_form_item","label","name","_component_a_input","value","username","placeholder","email","_component_a_input_password","password","_component_a_checkbox","checked","editModalVisible","handleUpdateUser","editRules","defineComponent","components","PlusOutlined","setup","currentUserId","createFormRef","editFormRef","reactive","required","message","trigger","fetchUsers","async","response","getUserList","data","error","console","resetUserForm","user","id","validate","createUser","success","updateData","updateUser","apiDeleteUser","onMounted","__exports__","render","_objectSpread","target","i","arguments","length","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","obj","defineProperty","configurable","writable","props","context","p","attrs","AntdIcon","A","displayName","inheritAttrs"],"sourceRoot":""}