{"version":3,"file":"assets/js/315.js","mappings":"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","sources":["webpack://design-helper-frontend/./src/views/ServiceManager.vue","webpack://design-helper-frontend/./src/api/services.js","webpack://design-helper-frontend/./src/views/ServiceManager.vue?dea3"],"sourcesContent":["<template>\r\n  <div class=\"service-manager\">\r\n    <div class=\"page-title\">\r\n      <h2>服务管理</h2>\r\n      <p class=\"sub-title\">管理系统服务</p>\r\n      <div class=\"action-buttons\">\r\n        <a-button type=\"primary\" @click=\"refreshServices\" style=\"margin-right: 8px\">刷新</a-button>\r\n        <a-button type=\"primary\" @click=\"showAddModal\">添加服务</a-button>\r\n      </div>\r\n    </div>\r\n\r\n    <a-card>\r\n      <a-table \r\n        :columns=\"columns\" \r\n        :data-source=\"services\" \r\n        :loading=\"loading\"\r\n        row-key=\"id\"\r\n      >\r\n        <template #bodyCell=\"{ column, record }\">\r\n          <template v-if=\"column.key === 'status'\">\r\n            <a-tag :color=\"record.status === 'running' ? 'green' : 'red'\">\r\n              {{ record.status_display }}\r\n            </a-tag>\r\n          </template>\r\n          <template v-if=\"column.key === 'actions'\">\r\n            <a-space>\r\n              <a-button \r\n                v-if=\"record.status !== 'running'\" \r\n                type=\"primary\" \r\n                size=\"small\" \r\n                @click=\"startService(record)\"\r\n                :loading=\"actionLoading[record.id]\"\r\n              >\r\n                启动\r\n              </a-button>\r\n              <a-button \r\n                v-else \r\n                danger \r\n                size=\"small\" \r\n                @click=\"stopService(record)\"\r\n                :loading=\"actionLoading[record.id]\"\r\n              >\r\n                停止\r\n              </a-button>\r\n              <a-button type=\"link\" size=\"small\" @click=\"editService(record)\">编辑</a-button>\r\n              <a-popconfirm\r\n                title=\"确定要删除此服务吗?\"\r\n                @confirm=\"deleteService(record.id)\"\r\n                ok-text=\"确定\"\r\n                cancel-text=\"取消\"\r\n              >\r\n                <a-button type=\"link\" danger size=\"small\">删除</a-button>\r\n              </a-popconfirm>\r\n            </a-space>\r\n          </template>\r\n        </template>\r\n      </a-table>\r\n    </a-card>\r\n\r\n    <!-- 添加/编辑服务模态框 -->\r\n    <a-modal\r\n      v-model:visible=\"modalVisible\"\r\n      :title=\"isEditing ? '编辑服务' : '添加服务'\"\r\n      @ok=\"saveService\"\r\n      :confirmLoading=\"submitLoading\"\r\n    >\r\n      <a-form layout=\"vertical\">\r\n        <a-form-item label=\"服务名称\">\r\n          <a-input v-model:value=\"currentService.name\" placeholder=\"输入服务名称\" />\r\n        </a-form-item>\r\n        <a-form-item label=\"描述\">\r\n          <a-textarea v-model:value=\"currentService.description\" placeholder=\"输入服务描述\" :rows=\"3\" />\r\n        </a-form-item>\r\n        <a-form-item label=\"启动命令\">\r\n          <a-input v-model:value=\"currentService.command\" placeholder=\"输入服务启动命令\" />\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, onUnmounted } from 'vue';\r\nimport { message } from 'ant-design-vue';\r\nimport serviceApi from '../api/services';\r\n\r\nexport default {\r\n  name: 'ServiceManager',\r\n  \r\n  setup() {\r\n    // 数据定义\r\n    const services = ref([]);\r\n    const loading = ref(false);\r\n    const modalVisible = ref(false);\r\n    const isEditing = ref(false);\r\n    const submitLoading = ref(false);\r\n    const actionLoading = reactive({});\r\n    const currentService = reactive({\r\n      id: null,\r\n      name: '',\r\n      description: '',\r\n      command: '',\r\n      status: 'stopped'\r\n    });\r\n    \r\n    // 轮询定时器\r\n    let statusTimer = null;\r\n    \r\n    // 表格列定义\r\n    const columns = [\r\n      {\r\n        title: 'ID',\r\n        dataIndex: 'id',\r\n        key: 'id',\r\n        width: 80\r\n      },\r\n      {\r\n        title: '服务名称',\r\n        dataIndex: 'name',\r\n        key: 'name',\r\n        width: 200\r\n      },\r\n      {\r\n        title: '描述',\r\n        dataIndex: 'description',\r\n        key: 'description'\r\n      },\r\n      {\r\n        title: '状态',\r\n        dataIndex: 'status',\r\n        key: 'status',\r\n        width: 120\r\n      },\r\n      {\r\n        title: '更新时间',\r\n        dataIndex: 'updated_at',\r\n        key: 'updated_at',\r\n        width: 180\r\n      },\r\n      {\r\n        title: '操作',\r\n        key: 'actions',\r\n        width: 200\r\n      }\r\n    ];\r\n    \r\n    // 加载服务列表\r\n    const loadServices = async () => {\r\n      loading.value = true;\r\n      try {\r\n        const response = await serviceApi.getServices();\r\n        services.value = response.data;\r\n      } catch (error) {\r\n        message.error('加载服务列表失败: ' + error.message);\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 刷新服务\r\n    const refreshServices = async () => {\r\n      try {\r\n        const response = await serviceApi.refreshServiceStatus();\r\n        services.value = response.data;\r\n        message.success('服务状态已刷新');\r\n      } catch (error) {\r\n        message.error('刷新服务状态失败: ' + error.message);\r\n      }\r\n    };\r\n    \r\n    // 定时刷新服务状态\r\n    const startStatusPolling = () => {\r\n      stopStatusPolling(); // 先停止之前的轮询\r\n      statusTimer = setInterval(async () => {\r\n        try {\r\n          const response = await serviceApi.refreshServiceStatus();\r\n          services.value = response.data;\r\n        } catch (error) {\r\n          console.error('刷新服务状态失败:', error);\r\n        }\r\n      }, 5000); // 每5秒刷新一次\r\n    };\r\n    \r\n    const stopStatusPolling = () => {\r\n      if (statusTimer) {\r\n        clearInterval(statusTimer);\r\n        statusTimer = null;\r\n      }\r\n    };\r\n    \r\n    // 启动服务\r\n    const startService = async (service) => {\r\n      actionLoading[service.id] = true;\r\n      try {\r\n        const response = await serviceApi.startService(service.id);\r\n        message.success(response.data.message || '服务已启动');\r\n        refreshServices();\r\n      } catch (error) {\r\n        message.error('启动服务失败: ' + (error.response?.data?.message || error.message));\r\n      } finally {\r\n        actionLoading[service.id] = false;\r\n      }\r\n    };\r\n    \r\n    // 停止服务\r\n    const stopService = async (service) => {\r\n      actionLoading[service.id] = true;\r\n      try {\r\n        const response = await serviceApi.stopService(service.id);\r\n        message.success(response.data.message || '服务已停止');\r\n        refreshServices();\r\n      } catch (error) {\r\n        message.error('停止服务失败: ' + (error.response?.data?.message || error.message));\r\n      } finally {\r\n        actionLoading[service.id] = false;\r\n      }\r\n    };\r\n    \r\n    // 显示添加模态框\r\n    const showAddModal = () => {\r\n      isEditing.value = false;\r\n      Object.assign(currentService, {\r\n        id: null,\r\n        name: '',\r\n        description: '',\r\n        command: '',\r\n        status: 'stopped'\r\n      });\r\n      modalVisible.value = true;\r\n    };\r\n    \r\n    // 编辑服务\r\n    const editService = (service) => {\r\n      isEditing.value = true;\r\n      Object.assign(currentService, service);\r\n      modalVisible.value = true;\r\n    };\r\n    \r\n    // 保存服务\r\n    const saveService = async () => {\r\n      if (!currentService.name || !currentService.command) {\r\n        message.error('服务名称和启动命令不能为空');\r\n        return;\r\n      }\r\n      \r\n      submitLoading.value = true;\r\n      try {\r\n        if (isEditing.value) {\r\n          await serviceApi.updateService(currentService.id, {\r\n            name: currentService.name,\r\n            description: currentService.description,\r\n            command: currentService.command\r\n          });\r\n          message.success('服务更新成功');\r\n        } else {\r\n          await serviceApi.createService({\r\n            name: currentService.name,\r\n            description: currentService.description,\r\n            command: currentService.command,\r\n            status: 'stopped'\r\n          });\r\n          message.success('服务添加成功');\r\n        }\r\n        modalVisible.value = false;\r\n        loadServices();\r\n      } catch (error) {\r\n        message.error((isEditing.value ? '更新' : '添加') + '服务失败: ' + error.message);\r\n      } finally {\r\n        submitLoading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 删除服务\r\n    const deleteService = async (id) => {\r\n      try {\r\n        await serviceApi.deleteService(id);\r\n        message.success('服务删除成功');\r\n        loadServices();\r\n      } catch (error) {\r\n        message.error('删除服务失败: ' + error.message);\r\n      }\r\n    };\r\n    \r\n    onMounted(() => {\r\n      loadServices();\r\n      startStatusPolling();\r\n    });\r\n    \r\n    onUnmounted(() => {\r\n      stopStatusPolling();\r\n    });\r\n    \r\n    return {\r\n      services,\r\n      loading,\r\n      columns,\r\n      modalVisible,\r\n      isEditing,\r\n      currentService,\r\n      submitLoading,\r\n      actionLoading,\r\n      refreshServices,\r\n      startService,\r\n      stopService,\r\n      showAddModal,\r\n      editService,\r\n      saveService,\r\n      deleteService\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.service-manager {\r\n  width: 100%;\r\n}\r\n\r\n.page-title {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.page-title h2 {\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.sub-title {\r\n  color: rgba(0, 0, 0, 0.45);\r\n  font-size: 14px;\r\n}\r\n\r\n.action-buttons {\r\n  margin-top: 16px;\r\n}\r\n\r\n.ant-card {\r\n  margin-bottom: 16px;\r\n}\r\n</style> ","import axios from 'axios';\r\n\r\n// API基础路径\r\nconst API_URL = '/api/v1/services/';\r\n\r\n/**\r\n * 服务管理API\r\n */\r\nconst serviceApi = {\r\n  /**\r\n   * 获取所有服务\r\n   */\r\n  getServices() {\r\n    return axios.get(API_URL);\r\n  },\r\n  \r\n  /**\r\n   * 获取单个服务\r\n   * @param {number} id 服务ID\r\n   */\r\n  getService(id) {\r\n    return axios.get(`${API_URL}${id}/`);\r\n  },\r\n  \r\n  /**\r\n   * 创建服务\r\n   * @param {object} serviceData 服务数据\r\n   */\r\n  createService(serviceData) {\r\n    return axios.post(API_URL, serviceData);\r\n  },\r\n  \r\n  /**\r\n   * 更新服务\r\n   * @param {number} id 服务ID\r\n   * @param {object} serviceData 服务数据\r\n   */\r\n  updateService(id, serviceData) {\r\n    return axios.put(`${API_URL}${id}/`, serviceData);\r\n  },\r\n  \r\n  /**\r\n   * 删除服务\r\n   * @param {number} id 服务ID\r\n   */\r\n  deleteService(id) {\r\n    return axios.delete(`${API_URL}${id}/`);\r\n  },\r\n  \r\n  /**\r\n   * 启动服务\r\n   * @param {number} id 服务ID\r\n   */\r\n  startService(id) {\r\n    return axios.post(`${API_URL}${id}/start/`);\r\n  },\r\n  \r\n  /**\r\n   * 停止服务\r\n   * @param {number} id 服务ID\r\n   */\r\n  stopService(id) {\r\n    return axios.post(`${API_URL}${id}/stop/`);\r\n  },\r\n  \r\n  /**\r\n   * 刷新所有服务状态\r\n   */\r\n  refreshServiceStatus() {\r\n    return axios.get(`${API_URL}refresh_status/`);\r\n  }\r\n};\r\n\r\nexport default serviceApi; ","import { render } from \"./ServiceManager.vue?vue&type=template&id=7fb2d2cb&scoped=true\"\nimport script from \"./ServiceManager.vue?vue&type=script&lang=js\"\nexport * from \"./ServiceManager.vue?vue&type=script&lang=js\"\n\nimport \"./ServiceManager.vue?vue&type=style&index=0&id=7fb2d2cb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+comp_f9631e568d1fa9c9629941e78f438030/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7fb2d2cb\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_a_button","type","onClick","$setup","refreshServices","style","default","_withCtx","_cache","_createTextVNode","_","showAddModal","_component_a_card","_component_a_table","columns","services","loading","bodyCell","column","record","key","_createBlock","_component_a_tag","color","status","_toDisplayString","status_display","_createCommentVNode","_component_a_space","size","$event","startService","actionLoading","id","danger","stopService","editService","_component_a_popconfirm","title","onConfirm","deleteService","_component_a_modal","visible","modalVisible","isEditing","onOk","saveService","confirmLoading","submitLoading","_component_a_form","layout","_component_a_form_item","label","_component_a_input","value","currentService","name","placeholder","_component_a_textarea","description","rows","command","API_URL","serviceApi","getServices","axios","get","getService","createService","serviceData","post","updateService","put","delete","refreshServiceStatus","setup","ref","reactive","statusTimer","dataIndex","width","loadServices","async","response","data","error","message","success","startStatusPolling","stopStatusPolling","setInterval","console","clearInterval","service","Object","assign","onMounted","onUnmounted","__exports__","render"],"sourceRoot":""}